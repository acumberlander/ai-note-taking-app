(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{82022:(e,t,l)=>{Promise.resolve().then(l.bind(l,19322))},19322:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>F});var s=l(95155),a=l(12115),n=l(76046),r=l(30408),i=l(5565);function o(e){let{onClick:t}=e;return(0,s.jsx)("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 text-white hover:bg-blue-400 transition","aria-label":"Refresh",children:(0,s.jsx)(i.default,{src:"/refresh.png",alt:"refresh",width:30,height:30})})}var c=l(9757),d=l(95055);let x=()=>{let[e,t]=(0,a.useState)(""),[l,s]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),c=(0,a.useRef)(null),d=(0,a.useRef)([]);return{text:e,isRecording:l,isTranscribing:n,startRecording:async()=>{o(null),t(""),d.current=[];try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);c.current=t,t.ondataavailable=e=>{d.current.push(e.data)},t.start(),s(!0)}catch(e){o("Failed to access microphone. Please allow microphone permissions.")}},stopRecording:async()=>{if(!c.current){o("Recorder not initialized.");return}s(!1),r(!0),c.current.stop(),c.current.onstop=async()=>{try{var e;let l=new Blob(d.current,{type:"audio/wav"}),s=new FormData;s.append("audio",l,"audio.wav");let a=await fetch("http://localhost:5000/api/transcribe",{method:"POST",body:s}),n=await a.json();if(t((null===(e=n.text)||void 0===e?void 0:e.trim())||"search_all"),!a.ok)throw Error(n.error||"Failed to transcribe audio.")}catch(e){o(e.message||"An error occurred while transcribing.")}finally{r(!1)}}},reset:()=>{t("")},error:i}};var u=l(95742),h=l(89800),m=l(1277),g=l(31574);let p=e=>{let{setQuery:t}=e,[l,s]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),{fetchNotes:x,updateAiResponse:u,noteFormLoading:p,setNoteFormLoading:f}=(0,h.L)(),{user:y}=(0,m.k)(),j=()=>{s(""),r(""),o("")},v=async e=>{e.preventDefault(),l&&n&&(f(!0),await (0,g.Iy)({title:l,content:n,user_id:(null==y?void 0:y.id)||null}),f(!1),await b())},b=async()=>{t(""),j(),u(""),y&&await x(y.id)};return{title:l,filter:i,content:n,isFilter:c,noteFormLoading:p,setTitle:s,setContent:r,setIsFilter:d,handleSubmit:v,refreshNotes:b,handleSearchChange:e=>{o(e.target.value),t(e.target.value)}}};function f(e){let{setQuery:t}=e,{title:l,filter:n,content:r,isFilter:i,noteFormLoading:h,setTitle:m,setContent:g,setIsFilter:f,handleSubmit:y,refreshNotes:j,handleSearchChange:v}=p({setQuery:t}),{startRecording:b,stopRecording:w,isRecording:N,isTranscribing:k,text:C}=x(),S=""!==l.trim()&&""!==r.trim();return(0,a.useEffect)(()=>{!C||N||k||g(C)},[C,N,k,g]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex mt-2",children:[(0,s.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-1 rounded ".concat(i?"bg-gray-200":"bg-blue-500 text-white"),children:"Create"}),(0,s.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-1 rounded ".concat(i?"bg-blue-500 text-white":"bg-gray-200"),children:"Filter"})]}),(0,s.jsx)(o,{onClick:j})]}),(0,s.jsxs)("form",{onSubmit:y,className:"note-form bg-gray-100 p-4 rounded-lg relative",children:[h&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 pb-8 rounded",children:(0,s.jsx)(u.cq,{color:"#249fe4",size:"large",text:"Adding Note...",textColor:""})}),i?(0,s.jsx)("input",{type:"text",placeholder:"Filter displayed notes",onChange:v,value:n,className:"w-full p-2 mb-2 border rounded"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",placeholder:"Title",value:l,onChange:e=>m(e.target.value),className:"w-full p-2 mb-2 border rounded"}),(0,s.jsx)("textarea",{placeholder:"Content",value:r,onChange:e=>g(e.target.value),className:"w-full p-2 mb-2 border rounded"})]}),!i&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"w-full p-2 rounded ".concat(S?"bg-blue-500 text-white":"bg-gray-300 text-gray-500"),disabled:!S||h||k,children:"Add Note"}),(0,s.jsx)("button",{type:"button",onClick:()=>{N?w():b()},className:"p-3 rounded-full ".concat(N?"bg-red-500":"bg-gray-300"," text-white"),disabled:k||h,children:(0,s.jsx)(c.g,{icon:d.A54,className:"text-black w-6 h-6"})})]})]})]})}var y=l(20602),j=l(18281);function v(e){let{note:t,onViewNote:l}=e,{updateNote:n,setNoteToDelete:r,setDeleteModalState:i}=(0,h.L)(),{user:o}=(0,m.k)(),{id:c}=t,[d,x]=(0,a.useState)(!1),[g,p]=(0,a.useState)(t.title),[f,v]=(0,a.useState)(t.content),[b,w]=(0,a.useState)(!1),N={whiteSpace:"pre-line",wordBreak:"break-word"},k=async()=>{if(!g.trim()||!f.trim())return;w(!0);let e=(null==o?void 0:o.id)||null;await n(c,{title:g,content:f,user_id:e}),w(!1),x(!1)};return(0,s.jsx)(y.P.div,{whileHover:{scale:1.05},whileTap:d?void 0:{scale:.9},children:(0,s.jsxs)("div",{className:"relative flex flex-col justify-between bg-white shadow-md rounded-xl p-4 h-64 overflow-hidden cursor-pointer",onClick:()=>{d||l(t)},children:[b&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 pb-8",children:(0,s.jsx)(u.cq,{color:"#249fe4",size:"large",text:"Saving...",textColor:""})}),d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),className:"w-full p-2 border rounded mb-2",onClick:e=>e.stopPropagation()}),(0,s.jsx)("textarea",{value:f,onChange:e=>v(e.target.value),className:"w-full p-2 border rounded h-full",onClick:e=>e.stopPropagation()}),(0,s.jsxs)("div",{className:"flex justify-evenly m-2 h-10",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),k()},className:"bg-green-500 text-white px-4 py-1 rounded",children:"Save"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),x(!1)},className:"bg-gray-500 text-white px-4 py-1 rounded",children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:null==t?void 0:t.title}),(null==t?void 0:t.content.length)>240?(0,s.jsx)("div",{className:"overflow-y-hidden hover:overflow-y-auto hover:border-2 hover:border-blue-100",children:(0,s.jsx)("div",{className:"text-gray-600 mt-2 max-h-28 markdown-content",style:N,children:(0,s.jsx)(j.Typography,{children:null==t?void 0:t.content})})}):(0,s.jsx)("div",{className:"overflow-y-hidden hover:overflow-y-auto p-2",children:(0,s.jsx)("div",{className:"text-gray-600 mt-2 max-h-28 markdown-content",style:N,children:(0,s.jsx)(j.Typography,{children:null==t?void 0:t.content})})}),(0,s.jsxs)("div",{className:"flex justify-evenly m-2 h-10",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),r(void 0),i(!1),r(t),i(!0)},className:"bg-red-500 text-white px-4 py-1 rounded flex items-center justify-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5 mr-1",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Delete"]}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),x(!0)},className:"bg-blue-500 text-white px-4 py-1 rounded flex items-center justify-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5 mr-1",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Edit"]})]})]})]})})}var b=l(36743),w=l(92236),N=l(22471);function k(e){let{isOpen:t,handleClose:l,currentNote:n,onNavigate:r}=e,{setNoteToDelete:i,setDeleteModalState:o,updateNote:c,deleteNote:d}=(0,h.L)(),[x,g]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),[S,z]=(0,a.useState)(""),[L,T]=(0,a.useState)(!1),[D,H]=(0,a.useState)(""),[B,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n&&(C(n.title),z(n.content))},[n]);let E=async()=>{n&&(k.trim()||S.trim())&&(A(!0),await c(n.id,{title:k,content:S}),A(!1),g(!1))},R=async()=>{if(n){f(!0),v(!1),H(n.title);try{let e=n.id;await d(e)?(T(!0),setTimeout(()=>{T(!1);let{allNotes:e}=h.L.getState();if(0===e.length){l();let{fetchNotes:e}=h.L.getState(),{user:t}=m.k.getState();e((null==t?void 0:t.id)||null)}else r("next")},2e3)):console.error("Delete operation returned false")}catch(e){console.error("Error deleting note:",e)}finally{f(!1)}}};return n?(0,s.jsx)(j.Dialog,{size:"xl",open:t,handler:l,className:"fixed inset-0 flex items-center justify-center text-center bg-black/50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-4xl px-8 py-8 relative",children:[B&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 rounded-lg",children:(0,s.jsx)(u.cq,{color:"#249fe4",size:"large",text:"Saving...",textColor:""})}),p&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 rounded-lg",children:(0,s.jsx)(u.cq,{color:"#f44336",size:"large",text:"Deleting...",textColor:""})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[x?(0,s.jsx)(j.Input,{type:"text",value:k,onChange:e=>C(e.target.value),className:"text-2xl font-bold text-[1.875rem]",placeholder:"Note Title",style:{fontSize:"1.875rem",fontWeight:"bold"}}):(0,s.jsx)(j.Typography,{variant:"h3",color:"blue-gray",className:"text-left",children:n.title}),(0,s.jsx)(j.IconButton,{variant:"text",color:"red",onClick:l,className:"hover:bg-red-50 flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"h-8 w-8"})})]}),(0,s.jsx)(j.DialogBody,{className:"h-[30vh] overflow-y-auto p-0",children:L?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)(j.Typography,{variant:"h4",color:"red",children:['Your note "',D,'" was deleted']})}):y?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(j.Typography,{variant:"h4",color:"red",children:"Are you sure you want to delete this note?"}),(0,s.jsx)(j.Typography,{className:"font-bold",children:n.title}),(0,s.jsx)("div",{className:"prose max-w-none text-center overflow-y-auto max-h-40 p-2 border rounded",children:(0,s.jsx)("div",{className:"text-gray-600 mt-2 markdown-content",children:(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal"},children:n.content})})}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,s.jsx)(j.Button,{color:"gray",onClick:()=>{v(!1)},className:"text-lg font-medium px-5 py-2.5 text-white",children:"Cancel"}),(0,s.jsx)(j.Button,{color:"red",onClick:R,className:"text-lg font-medium px-5 py-2.5 text-white",children:"Delete"})]})]}):x?(0,s.jsx)(j.Textarea,{value:S,onChange:e=>z(e.target.value),className:"w-full h-full min-h-[20vh]",placeholder:"Note Content",style:{fontSize:"1.75em",lineHeight:"normal"}}):(0,s.jsx)("div",{className:"prose max-w-none text-left",children:(0,s.jsx)("div",{className:"markdown-content",children:(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal"},children:n.content})})})}),!y&&!L&&(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsx)(j.IconButton,{variant:"filled",color:"blue",onClick:()=>r("prev"),className:"flex items-center justify-center",children:(0,s.jsx)(w.A,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("div",{className:"flex space-x-4",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Button,{color:"gray",onClick:()=>{n&&(C(n.title),z(n.content)),g(!1)},className:"text-lg font-medium px-5 py-2.5 text-white",children:"Cancel"}),(0,s.jsx)(j.Button,{color:"green",onClick:E,className:"text-lg font-medium px-5 py-2.5 text-white",children:"Save"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Button,{variant:"filled",color:"red",onClick:()=>{v(!0)},className:"flex items-center justify-center text-lg font-medium px-5 py-2.5 text-white",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6 mr-2 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Delete"]}),(0,s.jsxs)(j.Button,{variant:"filled",color:"blue",onClick:()=>{g(!0)},className:"flex items-center justify-center text-lg font-medium px-5 py-2.5 text-white",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6 mr-2 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Edit"]})]})}),(0,s.jsx)(j.IconButton,{variant:"filled",color:"blue",onClick:()=>r("next"),className:"flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"h-6 w-6 text-white"})})]})]})}):null}function C(e){let{query:t,notes:l,createTestNotes:n}=e,{user:r}=(0,m.k)(),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(0),x=e=>{let t=l.findIndex(t=>t.id===e.id);-1!==t&&(d(t),o(!0))};return(0,s.jsxs)("div",{children:[(null==l?void 0:l.length)?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:l.map((e,t)=>(0,s.jsx)(y.P.div,{initial:{opacity:0,rotateX:-90},animate:{opacity:1,rotateX:0},transition:{duration:.5,ease:"easeOut",delay:.1*t},children:(0,s.jsx)(v,{className:"note-card",note:e,onViewNote:x})},e.id))}):(0,s.jsxs)("div",{className:"text-center mt-8",children:[(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal",color:"black"},children:"No notes found."}),(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal",color:"black"},className:"mt-2 mb-4",children:"Get started by creating your own notes above or click the button below to generate some sample notes."}),(0,s.jsx)("button",{onClick:n,className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition",children:"Create Test Notes"})]}),(0,s.jsx)(k,{isOpen:i,handleClose:()=>{o(!1)},currentNote:l[c],onNavigate:e=>{"prev"===e?d(e=>e>0?e-1:l.length-1):d(e=>e<l.length-1?e+1:0)}})]})}let S=()=>{let{text:e,error:t,isRecording:l,isTranscribing:s,reset:n,stopRecording:r,startRecording:i}=x(),{aiResponse:o,updateAiResponse:c,queryIntent:d,semanticQuery:u}=(0,h.L)(e=>e);return(0,a.useEffect)(()=>{!e||l||s||u(e)},[e,l,s,u]),{error:t,aiResponse:o,isRecording:l,isTranscribing:s,reset:n,stopRecording:r,startRecording:i,handleStartRecording:()=>{n(),c("I'm listening..."),i()},handleStopRecording:()=>{c(""),r()}}};var z=l(72568);let L=()=>{let{semanticSensitivity:e,setSemanticSensitivity:t}=(0,h.L)(),[l,n]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsxs)(j.Typography,{variant:"h6",color:"blue-gray",className:"text-sm",children:["Semantic Sensitivity: ",e.toFixed(2)]}),(0,s.jsx)(j.Tooltip,{content:"Lower values return fewer, more relevant results. Higher values return more results.",open:l,handler:n,placement:"top",className:"bg-gray-900 text-white p-2 rounded text-sm max-w-xs",children:(0,s.jsx)(z.A,{className:"h-5 w-5 ml-2 text-blue-500 cursor-pointer",onClick:()=>n(!l)})})]}),(0,s.jsx)(j.Slider,{value:e,onChange:e=>{t(parseFloat(e.target.value))},min:.2,max:.5,step:.01,className:"h-1.5"}),(0,s.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,s.jsx)(j.Typography,{variant:"small",color:"gray",className:"text-xs",children:"More Relevant"}),(0,s.jsx)(j.Typography,{variant:"small",color:"gray",className:"text-xs",children:"More Results"})]})]})};function T(){let{error:e,aiResponse:t,isRecording:l,isTranscribing:a,handleStartRecording:n,handleStopRecording:r}=S();return(0,s.jsx)("div",{className:"mt-4 p-4 bg-white shadow-md rounded-lg",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onMouseDown:n,onMouseUp:r,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:bg-gray-400",children:l?"Recording...":"Hold to Speak"}),a&&(0,s.jsx)("p",{className:"mt-2 text-gray-500",children:"Transcribing..."}),e&&(0,s.jsx)("p",{className:"mt-2 text-red-500",children:e}),t&&(0,s.jsx)("p",{className:"mt-4 font-semibold",children:t})]}),(0,s.jsx)(L,{})]})})}function D(){let{noteToDelete:e,deleteNote:t,deleteModalIsOpen:l,setDeleteModalState:n,setNoteToDelete:r}=(0,h.L)(),[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l||o(!1)},[l]);let c=()=>{o(!1),n(!1),r(void 0)},d=async()=>{if(o(!0),!e||!e.id){o(!1),console.error("No note to delete"),c();return}try{await t(e.id)||console.error("Delete operation returned false"),o(!1),c()}catch(e){console.error("Error deleting note:",e),c()}finally{o(!1)}};return(0,s.jsx)(j.Dialog,{size:"xl",open:l,handler:c,className:"fixed inset-0 flex items-center justify-center p-4 text-center bg-black/50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl p-10 relative",children:[i&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 rounded-lg",children:(0,s.jsx)(u.cq,{color:"#f44336",size:"large",text:"Deleting...",textColor:""})}),(0,s.jsx)(j.DialogHeader,{className:"relative m-0 block",children:(0,s.jsx)(j.Typography,{variant:"h3",color:"blue-gray",children:"Are you sure you want to delete this note?"})}),(0,s.jsxs)(j.DialogBody,{className:"space-y-6 px-2",children:[(0,s.jsx)(j.Typography,{className:"font-bold text-xl",children:null==e?void 0:e.title}),(null==e?void 0:e.content.length)>240?(0,s.jsx)("div",{className:"overflow-y-hidden hover:overflow-y-auto hover:border-2 hover:border-blue-100",children:(0,s.jsx)("div",{className:"text-gray-600 mt-2 max-h-40 p-4",children:(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal"},className:"markdown-content",children:null==e?void 0:e.content})})}):(0,s.jsx)("div",{className:"overflow-y-hidden hover:overflow-y-auto p-4",children:(0,s.jsx)("div",{className:"text-gray-600 mt-2 max-h-40",children:(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal"},className:"markdown-content",children:null==e?void 0:e.content})})})]}),(0,s.jsxs)(j.DialogFooter,{className:"flex justify-evenly mt-6",children:[(0,s.jsx)(j.Button,{className:"text-lg font-medium px-6 py-3 text-white bg-gray-500",onClick:c,disabled:i,children:"Cancel"}),(0,s.jsx)(j.Button,{className:"text-lg font-medium px-6 py-3 text-white bg-red-500",onClick:d,disabled:i,children:"Delete"})]})]})})}function H(){let{queriedNotes:e,queryIntent:t,semanticDeleteModalIsOpen:l,deleteNotes:n,setQueriedNotes:r,setSemanticDeleteModalState:i}=(0,h.L)(),[o,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(e&&e.length>0){let l=e.map(e=>({...e,contentHidden:!0}));r(l),"delete_all"===t?c(l):c([])}},[l,t]);let m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(e)},g=e=>{o.some(t=>t.id===e.id)?c(o.filter(t=>t.id!==e.id)):c([...o,e])},p=async()=>{x(!0),await n(o)},f=t=>{e&&0!==e.length&&(r(e.map(e=>e.id===t?{...e,contentHidden:void 0!==e.contentHidden&&!e.contentHidden}:e)),c(o.map(e=>e.id===t?{...e,contentHidden:void 0!==e.contentHidden&&!e.contentHidden}:e)))};return(0,s.jsx)(j.Dialog,{size:"xl",open:l,handler:m,className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl mx-auto p-8 relative",children:[d&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 rounded-lg",children:(0,s.jsx)(u.cq,{color:"#f44336",size:"large",text:"Deleting...",textColor:""})}),(0,s.jsxs)(j.DialogHeader,{className:"relative p-6 flex flex-col",children:[(0,s.jsx)(j.Typography,{variant:"h2",color:"blue-gray",className:"text-4xl",children:"delete_all"===t?"Delete All Notes":"Delete Notes"}),(0,s.jsx)(j.Typography,{className:"mt-4 text-gray-600 text-2xl",children:"delete_all"===t?"You are about to delete all your notes. Please confirm your selection.":"Select the notes you wish to delete."})]}),(0,s.jsxs)(j.DialogBody,{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[!t.includes("delete_all")&&(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)(j.Button,{size:"sm",variant:o.length===(null==e?void 0:e.length)?"outlined":"filled",color:"blue",onClick:()=>{e&&e.length>0&&(o.length===e.length?c([]):c([...e]))},className:"text-sm",children:o.length===(null==e?void 0:e.length)?"Deselect All":"Select All"})}),(0,s.jsx)("ul",{className:"space-y-4",children:null==e?void 0:e.map(e=>(0,s.jsxs)("li",{className:"flex flex-start py-3 px-4",children:[(0,s.jsx)(j.Checkbox,{checked:o.some(t=>t.id===e.id),onChange:()=>g(e),containerProps:{className:"mr-4 scale-150"}}),(0,s.jsxs)("div",{onClick:()=>f(e.id),className:"flex flex-col p-3 border-2 rounded shadow-md cursor-pointer w-full hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)(j.Typography,{variant:"subtitle1",className:"text-2xl font-bold",children:e.title})}),(null==e?void 0:e.contentHidden)?null:(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(j.Typography,{variant:"paragraph",color:"gray",className:"text-[1.75em] markdown-content",children:e.content})})]})]},e.id))})]}),(0,s.jsxs)(j.DialogFooter,{className:"flex justify-end space-x-4 p-6",children:[(0,s.jsx)(j.Button,{className:"text-lg font-medium px-5 py-2.5 cursor-pointer",variant:"outlined",color:"gray",onClick:()=>m(!1),size:"lg",disabled:d,children:"Cancel"}),(0,s.jsx)(j.Button,{className:"text-lg font-medium px-5 py-2.5 cursor-pointer text-white",variant:"filled",color:"red",onClick:p,size:"lg",disabled:0===o.length||d,children:"delete_all"===t?"Delete All Notes (".concat(o.length,")"):"Delete Selected (".concat(o.length,")")})]})]})})}var B=l(73195);let A=()=>{let[e,t]=(0,a.useState)(""),{allNotes:l,fetchNotes:s,setNoteListLoading:n}=(0,h.L)(),{user:r}=(0,m.k)(),[i,o]=(0,a.useState)(l),c=(0,a.useRef)(!1);(0,a.useEffect)(()=>{r&&!c.current&&(c.current=!0,s(r.id))},[r]),(0,a.useEffect)(()=>{if(""===e.trim())o(l);else{let t=e.toLowerCase();o(l.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)))}},[e,l]);let d=async()=>{if(r){n(!0);try{await Promise.all(B.t.map(async e=>await (0,g.Iy)({title:e.title,content:e.content,user_id:r.id}))),await s(r.id)}catch(e){console.error("Error creating test notes:",e),n(!1)}}};return{query:e,setQuery:t,filteredNotes:i,fetchNotes:s,createTestNotes:d}},E=()=>{let[e,t]=(0,a.useState)(!1),[l,s]=(0,a.useState)(!1);return{isOpen:e,openModal:()=>{t(!0)},closeModal:()=>{t(!1)},isSaving:l,setIsSaving:s}},R=e=>{let{refreshNotes:t}=e,{semanticEditModalIsOpen:l,setSemanticEditModalState:n,queriedNotes:r,editedNotes:i,setEditedNotes:o,updateNotes:c,updateAiResponse:d,setQueryIntent:x}=(0,h.L)(),{isSaving:m,setIsSaving:g}=E(),[p,f]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&console.log("Modal opened with:",{queriedNotes:r,editedNotes:i})},[l,r,i]),(0,a.useEffect)(()=>{l&&console.log("Semantic Edit Modal opened with:",{queriedNotes:r,editedNotes:i})},[l,r,i]),(0,a.useEffect)(()=>{l&&(null==r?void 0:r.length)>0&&(!i||0===i.length)&&(console.log("Initializing editedNotes from queriedNotes"),o([...r]))},[l,r,i,o]);let y=(e,t)=>{o(i.map(l=>l.id===e?{...l,content:t}:l))},v=(e,t)=>{o(i.map(l=>l.id===e?{...l,title:t}:l))},b=async()=>{N(!1),await t()},w=async()=>{g(!0);let e=await c(i);g(!1),e?(N(!1),await t()):f("There was a problem saving your note updates...")},N=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||n(!1)};return(0,s.jsxs)(j.Dialog,{open:l,handler:N,className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:[m&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10 pb-8",children:(0,s.jsx)(u.cq,{color:"#249fe4",size:"medium",text:"Saving...",textColor:""})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-4xl mx-auto p-8",children:[(0,s.jsxs)(j.DialogHeader,{className:"relative p-6 flex flex-col",children:[(0,s.jsx)(j.Typography,{variant:"h2",color:"blue-gray",className:"text-2xl",children:"Review AI Edited Notes"}),(0,s.jsx)(j.Typography,{className:"mt-3 text-gray-600 text-lg",children:"Review the AI-suggested edits below. You can modify any note before saving."})]}),(0,s.jsx)(j.DialogBody,{className:"px-6 py-2 max-h-[500px] overflow-y-auto",children:i&&i.length>0?i.map((e,t)=>{let l=(null==r?void 0:r.find(t=>t.id===e.id))||e;return(0,s.jsx)("div",{className:"border rounded-md p-6 space-y-5 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium text-lg text-gray-600 mb-3",children:"".concat(null==l?void 0:l.title," (Original)")}),(0,s.jsx)("div",{className:"mt-2 p-2 border rounded bg-gray-50 markdown-content",style:{whiteSpace:"pre-line",wordBreak:"break-word"},children:(0,s.jsx)(j.Typography,{style:{fontSize:"1.75em",lineHeight:"normal"},className:"markdown-content",children:(null==l?void 0:l.content)||"Original content not found"})})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium text-lg text-gray-600 mb-3",children:(0,s.jsx)("input",{type:"text",value:null==e?void 0:e.title,onChange:t=>v(e.id,t.target.value),className:"w-full p-1 border rounded bg-blue-50 focus:ring-2 focus:ring-blue-300",style:{fontSize:"1em"}})}),(0,s.jsx)("div",{className:"mt-2 p-2 border rounded bg-blue-50 markdown-content",style:{whiteSpace:"pre-line",wordBreak:"break-word"},children:(0,s.jsx)(j.Textarea,{value:e.content,onChange:t=>y(e.id,t.target.value),className:"w-full bg-blue-50 border-none focus:ring-2 focus:ring-blue-300",style:{fontSize:"1.75em",lineHeight:"normal"}})})]})]})},e.id)}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No notes found to edit."})})}),(0,s.jsxs)(j.DialogFooter,{className:"flex justify-end space-x-4 p-6",children:[(0,s.jsx)(j.Button,{className:"cursor-pointer p-4 text-lg",variant:"outlined",color:"gray",size:"lg",onClick:b,children:"Cancel"}),(0,s.jsx)(j.Button,{className:"cursor-pointer p-4 text-lg",variant:"filled",color:"blue",size:"lg",onClick:w,children:"Save Changes"})]})]})]})};function F(){(0,r.W)();let{user:e,loading:t}=(0,m.k)(),l=(0,n.useRouter)(),{noteListLoading:i}=(0,h.L)(),{query:o,setQuery:c,filteredNotes:d,createTestNotes:x}=A(),{refreshNotes:g}=p({setQuery:c});return((0,a.useEffect)(()=>{t||e||l.push("/auth")},[e,t,l]),t||!e)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)(u.r3,{color:"#2a9cef",size:"large",text:"Loading...",textColor:""})}):(0,s.jsxs)("div",{className:"container mx-auto p-4 md:p-8 pt-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Your Notes"}),(0,s.jsx)(f,{setQuery:c}),(0,s.jsx)(T,{}),i?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)(u.r3,{color:"#2a9cef",size:"large",text:"Loading",textColor:""})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{notes:d,query:o,createTestNotes:x}),(0,s.jsx)(D,{}),(0,s.jsx)(H,{}),(0,s.jsx)(R,{refreshNotes:g})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[601,266,869,971,742,404,408,441,517,358],()=>t(82022)),_N_E=e.O()}]);